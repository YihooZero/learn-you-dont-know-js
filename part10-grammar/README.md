## 语法

### 一.语句和表达式

```javascript
var a = 3 * 6;
var b = a;
b;
```

`3 * 6` 是一个表达式（结果为 `18`）。第二行的 `a` 也是一个表达式，第三行的 `b` 也是。 表达式 `a` 和 `b` 的结果值都是 18。

`var a = 3 * 6` 和 `var b = a` 称为“声明语句” ，因为它们声明了变量（还可以为其赋值）。`a = 3 * 6` 和 `b = a`（不带 `var`）叫作“赋值表达式”。

第三行代码中只有一个表达式 `b`，同时它也是一个语句。这样的情况通常叫作“表达式语句”。

#### 1.语句的结果值

规范定义 `var` 的结果值是 `undefined`。如果在控制台中输入 `var a = 42` 会得到结果值 `undefined`，而非 `42`。

代码块的结果值就如同一个隐式的返回，即返回最后一个语句的结果值。

```javascript
var b;
if (true) {
  b = 4 + 38;
}
```

在控制台上代码应该会显示 `42`，即最后一个语句 / 表达式 `b = 4 + 38` 的结果值。

#### 2.表达式的副作用

```javascript
var a = 42;
var b = a++;

a; // 43
b; // 42
```

`a++` 首先返回变量 `a` 的当前值 `42`（再将该值赋给 `b`），然后将 `a` 的值加 `1`

```javascript
var a = 42;

a++; // 42
a;   // 43

++a; // 44
a;   // 44
```

`++` 在前面时，如 `++a`，它的副作用（将 `a` 递增）产生在表达式返回结果值之前，而 `a++` 的副作用则产生在之后。

#### 3.上下文规则

##### 大括号

下面两种情况会用到大括号 `{ .. }`：

- 对象常量

  ```javascript
  var a = {
    foo: bar()
  };
  ```

  `{ .. }` 被赋值给 `a`，因而它是一个对象常量。

- 标签

  ```javascript
  {
    foo: bar()
  }
  ```

  这里涉及 `JavaScript` 中一个不太为人知的特性，叫作“标签语句” 。`foo` 是语句 `bar()` 的标签。

  ```javascript
  // 标签为foo的循环
  foo: for (var i=0; i<4; i++) {
    for (var j=0; j<4; j++) {
      // 如果j和i相等，继续外层循环
      if (j == i) {
        // 跳转到foo的下一个循环
        continue foo;
      }
      // 跳过奇数结果
      if ((j * i) % 2 == 1) {
        // 继续内层循环（没有标签的）
        continue;
      }
      console.log( i, j );
    }
  }
  
  // 1 0
  // 2 0
  // 2 1
  // 3 0
  // 3 2
  ```

  `contine foo` 并不是指“跳转到标签 `foo` 所在位置继续执行”，而是“执行 `foo` 循环的下一轮循环”。

  上例中 `continue` 跳过了循环 `3 1`，`continue foo`（带标签的循环跳转） 跳过了循环 `1 1` 和 `2 2`。

  带标签的循环跳转一个更大的用处在于，和 `break __` 一起使用可以实现从内层循环跳转到 外层循环。

  ```javascript
  // 标签为foo的循环
  foo: for (var i=0; i<4; i++) {
    for (var j=0; j<4; j++) {
      if ((i * j) >= 3) {
        console.log( "stopping!", i, j );
        break foo;
      }
      console.log( i, j );
    }
  }
  
  // 0 0
  // 0 1
  // 0 2
  // 0 3
  // 1 0
  // 1 1
  // 1 2
  // Stop! 1 3
  ```

  `break foo` 不是指“跳转到标签 `foo` 所在位置继续执行”，而是“跳出标签 `foo` 所在的循环 / 代码块，继续执行后面的代码”。

  标签也能用于非循环代码块，但只有 `break` 才可以。我们可以对带标签的代码块使用 `break ___`，但是不能对带标签的非循环代码块使用 `continue ___`，也不能对不带标签的代码块使用 `break`：

  ```javascript
  // 标签为bar的代码块
  function foo() {
    bar: {
      console.log( "Hello" );
      break bar;
      console.log( "never runs" );
    }
    console.log( "World" );
  }
  
  foo();
  // Hello
  // World
  ```

##### 代码块

```javascript
[] + {}; // "[object Object]"
{} + []; // 0
```

第一行代码中，`{}` 出现在 `+` 运算符表达式中，因此它被当作一个值（空对象）来处理。`[]` 会被强制类型转换为 `""`，而 `{}` 会被强制类型转换为 `"[object Object]"`。

但在第二行代码中，**`{}` 被当作一个独立的空代码块（不执行任何操作）**。代码块结尾不需要分号，所以这里不存在语法上的问题。最后 `+ []` 将 `[]` 显式强制类型转换为 `0`。

#####  对象解构

`{ a, b }` 实际上是 `{ a: a, b: b }` 的简化版本，两者均可，只不过 `{ a, b }` 更简洁。

`{ .. }` 还可以用作函数命名参数的对象解构， 方便隐式地用对象属性赋值：

```javascript
function foo({ a, b, c }) {
  // 不再需要这样:
  // var a = obj.a, b = obj.b, c = obj.c
  console.log( a, b, c );
}

foo( {
  c: [1,2,3],
  a: 42,
  b: "foo"
} ); // 42 "foo" [1, 2, 3]
```

##### else if 和可选代码块

